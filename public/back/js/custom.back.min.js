"use strict";var map,lat,lng,Datepicker=function(){var e=$(".datepicker");e.length&&e.each(function(){$(this).datepicker({disableTouchKeyboard:!0,autoclose:!1})})}(),CopyIcon=function(){var e,t=".btn-icon-clipboard",a=$(t);a.length&&((e=a).tooltip().on("mouseleave",function(){e.tooltip("hide")}),new ClipboardJS(t).on("success",function(e){$(e.trigger).attr("title","Copied!").tooltip("_fixTitle").tooltip("show").attr("title","Copy to clipboard").tooltip("_fixTitle"),e.clearSelection()}))}(),FormControl=function(){var e=$(".form-control");e.length&&e.on("focus blur",function(e){$(this).parents(".form-group").toggleClass("focused","focus"===e.type||0<this.value.length)}).trigger("blur")}(),$map=$("#map-canvas"),color="#5e72e4";function initMap(){map=document.getElementById("map-canvas"),lat=map.getAttribute("data-lat"),lng=map.getAttribute("data-lng");var e=new google.maps.LatLng(lat,lng),t={zoom:12,scrollwheel:!1,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:color},{visibility:"on"}]}]};map=new google.maps.Map(map,t);var a=new google.maps.Marker({position:e,map:map,animation:google.maps.Animation.DROP,title:"Hello World!"}),n=new google.maps.InfoWindow({content:'<div class="info-window-content"><h2>Argon Dashboard</h2><p>A beautiful Dashboard for Bootstrap 4. It is Free and Open Source.</p></div>'});google.maps.event.addListener(a,"click",function(){n.open(map,a)})}$map.length&&google.maps.event.addDomListener(window,"load",initMap);var Navbar=function(){var e=$(".navbar-nav, .navbar-nav .nav"),t=$(".navbar .collapse"),a=$(".navbar .dropdown");t.on({"show.bs.collapse":function(){var a;(a=$(this)).closest(e).find(t).not(a).collapse("hide")}}),a.on({"hide.bs.dropdown":function(){var e,t;e=$(this),(t=e.find(".dropdown-menu")).addClass("close"),setTimeout(function(){t.removeClass("close")},200)}})}(),NavbarCollapse=function(){$(".navbar-nav");var e=$(".navbar .collapse");e.length&&(e.on({"hide.bs.collapse":function(){e.addClass("collapsing-out")}}),e.on({"hidden.bs.collapse":function(){e.removeClass("collapsing-out")}}))}(),noUiSlider=function(){if($(".input-slider-container")[0]&&$(".input-slider-container").each(function(){var e=$(this).find(".input-slider"),t=e.attr("id"),a=e.data("range-value-min"),n=e.data("range-value-max"),r=$(this).find(".range-slider-value"),o=r.attr("id"),s=r.data("range-value-low"),i=document.getElementById(t),l=document.getElementById(o);noUiSlider.create(i,{start:[parseInt(s)],connect:[!0,!1],range:{min:[parseInt(a)],max:[parseInt(n)]}}),i.noUiSlider.on("update",function(e,t){l.textContent=e[t]})}),$("#input-slider-range")[0]){var e=document.getElementById("input-slider-range"),t=document.getElementById("input-slider-range-value-low"),a=document.getElementById("input-slider-range-value-high"),n=[t,a];noUiSlider.create(e,{start:[parseInt(t.getAttribute("data-range-value-low")),parseInt(a.getAttribute("data-range-value-high"))],connect:!0,range:{min:parseInt(e.getAttribute("data-range-value-min")),max:parseInt(e.getAttribute("data-range-value-max"))}}),e.noUiSlider.on("update",function(e,t){n[t].textContent=e[t]})}}(),Popover=function(){var e=$('[data-toggle="popover"]'),t="";e.length&&e.each(function(){!function(e){e.data("color")&&(t="popover-"+e.data("color"));var a={trigger:"focus",template:'<div class="popover '+t+'" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'};e.popover(a)}($(this))})}(),ScrollTo=function(){var e=$(".scroll-me, [data-scroll-to], .toc-entry a");e.length&&e.on("click",function(e){var t,a,n,r;a=(t=$(this)).attr("href"),n=t.data("scroll-to-offset")?t.data("scroll-to-offset"):0,r={scrollTop:$(a).offset().top-n},$("html, body").stop(!0,!0).animate(r,600),event.preventDefault()})}(),Tooltip=function(){var e=$('[data-toggle="tooltip"]');e.length&&e.tooltip()}(),Charts=function(){var e,t=$('[data-toggle="chart"]'),a={base:"Open Sans"},n={gray:{100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},theme:{default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},black:"#12263F",white:"#FFFFFF",transparent:"transparent"};function r(e,t){for(var a in t)"object"!=typeof t[a]?e[a]=t[a]:r(e[a],t[a])}return window.Chart&&r(Chart,(e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:n.gray[600],defaultFontColor:n.gray[600],defaultFontFamily:a.base,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:n.theme.primary},line:{tension:.4,borderWidth:4,borderColor:n.theme.primary,backgroundColor:n.transparent,borderCapStyle:"rounded"},rectangle:{backgroundColor:n.theme.warning},arc:{backgroundColor:n.theme.primary,borderColor:n.white,borderWidth:4}},tooltips:{enabled:!1,mode:"index",intersect:!1,custom:function(e){var t=$("#chart-tooltip");if(t.length||(t=$('<div id="chart-tooltip" class="popover bs-popover-top" role="tooltip"></div>'),$("body").append(t)),0!==e.opacity){if(e.body){var a=e.title||[],n=e.body.map(function(e){return e.lines}),r="";r+='<div class="arrow"></div>',a.forEach(function(e){r+='<h3 class="popover-header text-center">'+e+"</h3>"}),n.forEach(function(t,a){e.labelColors[a].backgroundColor;var o=1<n.length?"justify-content-left":"justify-content-center";r+='<div class="popover-body d-flex align-items-center '+o+'"><span class="badge badge-dot"><i class="bg-primary"></i></span>'+t+"</div>"}),t.html(r)}var o=$(this._chart.canvas),s=(o.outerWidth(),o.outerHeight(),o.offset().top),i=o.offset().left,l=t.outerWidth(),d=t.outerHeight(),u=s+e.caretY-d-16,c=i+e.caretX-l/2;t.css({top:u+"px",left:c+"px",display:"block","z-index":"100"})}else t.css("display","none")},callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=e.yLabel,r="";return 1<t.datasets.length&&(r+='<span class="badge badge-primary mr-auto">'+a+"</span>"),r+'<span class="popover-body-value">'+n+"</span>"}}}},doughnut:{cutoutPercentage:83,tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){return""+'<span class="popover-body-value">'+t.datasets[0].data[e.index]+"</span>"}}},legendCallback:function(e){var t=e.data,a="";return t.labels.forEach(function(e,n){var r=t.datasets[0].backgroundColor[n];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+r+'"></i>',a+=e,a+="</span>"}),a}}}},Chart.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:n.gray[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:n.gray[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),Chart.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:10}),e)),t.on({change:function(){var e=$(this);e.is("[data-add]")&&function(e){var t=e.data("add"),a=$(e.data("target")).data("chart");e.is(":checked")?function e(t,a){for(var n in a)Array.isArray(a[n])?a[n].forEach(function(e){t[n].push(e)}):e(t[n],a[n])}(a,t):function e(t,a){for(var n in a)Array.isArray(a[n])?a[n].forEach(function(e){t[n].pop()}):e(t[n],a[n])}(a,t),a.update()}(e)},click:function(){var e=$(this);e.is("[data-update]")&&function(e){var t=e.data("update"),a=$(e.data("target")).data("chart");r(a,t),function(e,t){if(void 0!==e.data("prefix")||void 0!==e.data("prefix")){var a=e.data("prefix")?e.data("prefix"):"",n=e.data("suffix")?e.data("suffix"):"";t.options.scales.yAxes[0].ticks.callback=function(e){if(!(e%10))return a+e+n},t.options.tooltips.callbacks.label=function(e,t){var r=t.datasets[e.datasetIndex].label||"",o=e.yLabel,s="";return 1<t.datasets.length&&(s+='<span class="popover-body-label mr-auto">'+r+"</span>"),s+'<span class="popover-body-value">'+a+o+n+"</span>"}}}(e,a),a.update()}(e)}}),{colors:n,fonts:a,mode:"light"}}(),OrdersChart=function(){var e,t,a=$("#chart-orders");$('[name="ordersSelect"]'),a.length&&(e=a,t=new Chart(e,{type:"bar",options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=e.yLabel,r="";return 1<t.datasets.length&&(r+='<span class="popover-body-label mr-auto">'+a+"</span>"),r+'<span class="popover-body-value">'+n+"</span>"}}}},data:{labels:["Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Sales",data:[25,20,30,22,17,29]}]}}),e.data("chart",t))}(),SalesChart=function(){var e,t,a=$("#chart-sales");a.length&&(e=a,t=new Chart(e,{type:"line",options:{scales:{yAxes:[{gridLines:{color:Charts.colors.gray[900],zeroLineColor:Charts.colors.gray[900]},ticks:{callback:function(e){if(!(e%10))return"$"+e+"k"}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=e.yLabel,r="";return 1<t.datasets.length&&(r+='<span class="popover-body-label mr-auto">'+a+"</span>"),r+'<span class="popover-body-value">$'+n+"k</span>"}}}},data:{labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[0,20,10,30,15,40,20,60,60]}]}}),e.data("chart",t))}(),Doctors={slug:function(){var e=$("#slug").data("route"),t=$("#name").val();$("#name").change(function(){var a=$("#name").val(),n=$("#id_doctor").val();$("#btn-save").button("loading"),$.ajax({type:"post",url:e,dataType:"json",data:{title:a,title_before:t,id:n,mod:"doctor"}}).done(function(e){$("#slug").val(e.data.slug);var t=$("#slug-url").data("slug")+"/"+e.data.slug;$("#slug-url").html(t),$("#slug-url").attr("href",t)}).fail(function(e){}).always(function(){$("#btn-save").button("reset")})}).change()},eliminateMessages:function(){$("#name").blur(function(){""==!$(this).val()&&$("#name + p").html("")}),$("#excerpt").blur(function(){""==!$(this).val()&&$("#excerpt + p").html("")})},createDoctor:function(){var e=$("#doctor-form");e.validate({rules:{name:{required:!0,minlength:2,lettersonly:!0},lastname:{required:!0,minlength:2,lettersonly:!0},phone:{number:!0,minlength:9},rut:{required:!0,minlength:6,maxlength:9},email:"email",excerpt:"required",imgurl:"required",specialty:"required"},messages:{name:{required:"El nombre es un campo requerido",minlength:"Escriba un nombre más largo",lettersonly:"Solo se permiten letras"},lastname:{required:"El apellido es un campo requerido",minlength:"Escriba un apellido más largo",lettersonly:"Solo se permiten letras"},phone:{number:"Ingrese un teléfono válido",minlength:"Ingrese un teléfono válido"},rut:{required:"El rut es un campo requerido",minlength:"No es un rut válido",maxlength:"No es un rut válido"},email:"El email no es válido",excerpt:"El extracto es un campo requerido",imgurl:"No ha agregado una imagen",specialty:"Al menos una especialidad es requerida"}}),$("#btn-save").click(function(){if(e.valid()){$(this).button("loading");var t=new FormData(document.getElementById("doctor-form"));return $.ajax({type:"post",url:e.attr("action"),data:t,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if(400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status){toastr.success(e.message,"!Exitoso!"),$("#doctor-form")[0].reset(),$(".invalid-feedback").html(""),$("#canvas").cropper("destroy"),$("#office").val(null).trigger("change"),$("#specialty").val(null).trigger("change");var t=$("#slug-url").data("slug");$("#slug-url").html(t)}}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),jQuery.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z áãâäàéêëèíîïìóõôöòúûüùçñ]+$/i.test(e)},"Letters and spaces only please")},editDoctor:function(){var e=$("#doctor-form");e.validate({rules:{name:{required:!0,minlength:2,lettersonly:!0},lastname:{required:!0,minlength:2,lettersonly:!0},phone:{number:!0,minlength:9},rut:{required:!0,minlength:6,maxlength:9},email:"email",excerpt:"required",imgurl:"required",specialty:"required"},messages:{name:{required:"El nombre es un campo requerido",minlength:"Escriba un nombre más largo",lettersonly:"Solo se permiten letras"},lastname:{required:"El apellido es un campo requerido",minlength:"Escriba un apellido más largo",lettersonly:"Solo se permiten letras"},phone:{number:"Ingrese un teléfono válido",minlength:"Ingrese un teléfono válido"},rut:{required:"El rut es un campo requerido",minlength:"No es un rut válido",maxlength:"No es un rut válido"},email:"El email no es válido",excerpt:"El extracto es un campo requerido",imgurl:"No ha agregado una imagen",specialty:"Al menos una especialidad es requerida"}}),$("#btn-save").click(function(){if(e.valid()){$(this).button("loading");var t=new FormData(document.getElementById("doctor-form"));return $.ajax({type:"post",url:e.attr("action"),data:t,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status&&toastr.success(e.message,"!Exitoso!")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),jQuery.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z áãâäàéêëèíîïìóõôöòúûüùçñ]+$/i.test(e)},"Letters and spaces only please")},imageUploadDoctor:function(e){var t=$("#canvas"),a=t.get(0).getContext("2d");$("#result"),$("#fileInput").on("change",function(){if(this.files&&this.files[0])if(this.files[0].type.match(/^image\//)){$("#btnCrop").prop("disabled",!1);var e=new FileReader;e.onload=function(e){var n=new Image;n.onload=function(){t.cropper("destroy");var e=n.width,r=n.height;a.canvas.height=r,a.canvas.width=e,a.drawImage(n,0,0,e,r),t.cropper({aspectRatio:1,background:!0,autoCropArea:1,viewMode:1,width:500,height:500})},n.src=e.target.result},e.readAsDataURL(this.files[0])}else alert("Invalid file type! Please select an image file.");else alert("No file(s) selected.")}),$("#btnCrop").click(function(a){a.preventDefault(),$(".imagen-add").html(""),$(this).button("loading");var n=t.cropper("getCroppedCanvas").toDataURL("image/png");$.ajax({type:"post",url:e,dataType:"json",data:{img:n}}).done(function(e){var t=e.data.img_url;$("#imgurl").val(e.data.img_name),$("#avatar-doctor").attr("src",t),$("#modal-notification").modal("hide")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btnCrop").button("reset")})})},allDoctors:function(){var e=$(".datatable-doctors").data("route");$(".datatable-doctors").DataTable({processing:!0,serverSide:!1,ajax:e,responsive:!0,order:[[4,"desc"]],columns:[{data:"file",width:"100px",render:function(e,t,a,n){return'<a class="avatar avatar-sm"><img src="'+e+'" class="rounded-circle "></a>'}},{data:"name",width:"100px",render:function(e,t,a,n){return'<a href="'+a.route+'">'+e+"</a>"}},{data:"phone",width:"100px"},{data:"email",width:"100px"},{data:"route",width:"120px",visible:!1}],columnDefs:[{className:"cdatatable-td",targets:[0]},{className:"cdatatable-td",targets:[1]},{className:"cdatatable-td",targets:[2]},{className:"cdatatable-td",targets:[3]},{className:"cdatatable-td",targets:[4]}],fnInitComplete:function(){$(".datatable-doctors").css("width","100%")},lengthMenu:[[10,25,50,100,200,300,400,500],[10,25,50,100,200,300,400,500]]}).columns.adjust().draw()}},Posts={slug:function(){var e=$("#slug").data("route"),t=$("#name").val();$("#name").change(function(){var a=$("#name").val(),n=$("#id_post").val();$("#btn-save").button("loading"),$.ajax({type:"post",url:e,dataType:"json",data:{title:a,title_before:t,id:n,mod:"post"}}).done(function(e){$("#slug").val(e.data.slug);var t=$("#slug-url").data("slug")+"/"+e.data.slug;$("#slug-url").html(t),$("#slug-url").attr("href",t)}).fail(function(e){}).always(function(){$("#btn-save").button("reset")})}).change()},editHTML:function(){$("#body").summernote({height:200})},eliminateMessages:function(){$("#name").blur(function(){""==!$(this).val()&&$("#name + p").html("")}),$("#excerpt").blur(function(){""==!$(this).val()&&$("#excerpt + p").html("")})},imageUpload:function(e){$.uploadPreview({input_field:"#image",preview_box:"#image-preview",label_field:"#image-label",label_default:e,label_selected:e})},tagsInput:function(){$('input[name="tags"]').amsifySuggestags({type:"amsify"})},createPost:function(){var e=$("#post"),t=e.validate({rules:{name:{required:!0,minlength:5},excerpt:"required",body:"required",image:"required"},messages:{name:{required:"El titulo es un campo requerido",minlength:"Escriba un titulo más largo"},excerpt:"El extracto es un campo requerido",body:"No ha agregado contenido",image:"No ha agregado una imagen"},ignore:":hidden, [contenteditable='true']:not([body])"});$("#btn-save").click(function(t){if(t.preventDefault(),e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("post"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if(400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status){toastr.success(e.message,"!Exitoso!"),$("#post")[0].reset(),$("#body").summernote("reset"),$("#image-preview").css("background-image",""),$(".invalid-feedback").html(""),$(".amsify-suggestags-input-area").remove(".amsify-select-tag");var t=$("#slug-url").data("slug");$("#slug-url").html(t)}}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#body").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},editPost:function(){var e=$("#post"),t=e.validate({rules:{name:{required:!0,minlength:5},excerpt:"required",body:"required"},messages:{name:{required:"El titulo es un campo requerido",minlength:"Escriba un titulo más largo"},excerpt:"El extracto es un campo requerido",body:"No ha agregado contenido"},ignore:":hidden, [contenteditable='true']:not([body])"});$("#btn-save").click(function(t){if(e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("post"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status&&toastr.success(e.message,"!Exitoso!")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#body").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},allPosts:function(){var e=$(".datatable-posts").data("route");$(".datatable-posts").DataTable({processing:!0,serverSide:!1,ajax:e,responsive:!0,order:[[4,"desc"]],columns:[{data:"title",width:"100px",render:function(e,t,a,n){return'<a href="'+a.route+'">'+e+"</a>"}},{data:"category",width:"100px"},{data:"tags",width:"100px",render:function(e,t,a,n){var r="";return console.log(a),jQuery.each(e,function(e,t){r+='<span class="badge badge-info">'+t+"</span>"}),r}},{data:"status",width:"80px",render:function(e,t,a,n){return"DRAFT"==e?'<span class="badge badge-default">Borrador</span>':'<span class="badge badge-success">Publicado</span>'}},{data:"created",width:"120px"},{data:"route",width:"120px",visible:!1}],columnDefs:[{className:"cdatatable-td",targets:[0]},{className:"cdatatable-td",targets:[1]},{className:"cdatatable-td",targets:[2]},{className:"cdatatable-td",targets:[3]},{className:"cdatatable-td",targets:[4]}],fnInitComplete:function(){$(".datatable-posts").css("width","100%")},lengthMenu:[[10,25,50,100,200,300,400,500],[10,25,50,100,200,300,400,500]]}).columns.adjust().draw()},datePicker:function(){var e=$("#date-range");e.daterangepicker({autoApply:!0,opens:"left",startDate:moment(),endtDate:moment(),showDropdowns:!0,showWeekNumbers:!0,buttonClasses:["btn btn-sm"],applyClass:" blue",cancelClass:"default",format:"DD/MM/YYYY",separator:" to ",locale:{applyLabel:"Aceptar",cancelLabel:"Cancelar",fromLabel:"Desde",toLabel:"Hasta",customRangeLabel:"Rango Personalizado",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},function(e,t){$("#date-range span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#date-range span").html(moment().format("MMMM D, YYYY")+" - "+moment().format("MMMM D, YYYY")),$("#start_date").val(moment().format("YYYY-MM-DD")),$("#end_date").val(moment().format("YYYY-MM-DD")),e.on("apply.daterangepicker",function(e,t){$("#start_date").val(t.startDate.format("YYYY-MM-DD")),$("#end_date").val(t.endDate.format("YYYY-MM-DD"))})}},Offices={slug:function(){var e=$("#slug").data("route"),t=$("#name").val();$("#name").change(function(){var a=$("#name").val(),n=$("#id_office").val();$("#btn-save").button("loading"),$.ajax({type:"post",url:e,dataType:"json",data:{title:a,title_before:t,id:n,mod:"office"}}).done(function(e){$("#slug").val(e.data.slug);var t=$("#slug-url").data("slug")+"/"+e.data.slug;$("#slug-url").html(t),$("#slug-url").attr("href",t)}).fail(function(e){}).always(function(){$("#btn-save").button("reset")})}).change()},editHTML:function(){$("#body").summernote({height:200})},eliminateMessages:function(){$("#name").blur(function(){""==!$(this).val()&&$("#name + p").html("")}),$("#excerpt").blur(function(){""==!$(this).val()&&$("#excerpt + p").html("")})},imageUpload:function(e){$.uploadPreview({input_field:"#image",preview_box:"#image-preview",label_field:"#image-label",label_default:e,label_selected:e})},createOffice:function(){var e=$("#office");e.validate({rules:{name:{required:!0,minlength:5},phone:{number:!0,minlength:9,required:!0},map:"required",address:"required",image:"required"},messages:{name:{required:"El titulo es un campo requerido",minlength:"Escriba un titulo más largo"},phone:{number:"Solo se permiten numeros",minlength:"Escriba un número válido",required:"El número es requerido"},map:"El map es un campo requerido",address:"No ha agregado la dirección",image:"No ha agregado una imagen"}}),$("#btn-save").click(function(t){if(t.preventDefault(),e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("office"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if(400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status){toastr.success(e.message,"!Exitoso!"),$("#office")[0].reset(),$("#image-preview").css("background-image",""),$(".invalid-feedback").html("");var t=$("#slug-url").data("slug");$("#slug-url").html(t)}}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}})},editOffice:function(){var e=$("#office");e.validate({rules:{name:{required:!0,minlength:5},phone:{number:!0,minlength:9,required:!0},map:"required",address:"required"},messages:{name:{required:"El titulo es un campo requerido",minlength:"Escriba un titulo más largo"},phone:{number:"Solo se permiten numeros",minlength:"Escriba un número válido",required:"El número es requerido"},map:"El map es un campo requerido",address:"No ha agregado la dirección"}}),$("#btn-save").click(function(t){if(t.preventDefault(),e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("office"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status&&toastr.success(e.message,"!Exitoso!")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}})},selectOffice:function(e){var t=$("#office");t.select2({multiple:!0,tags:!1,placeholder:"...",maximumSelectionSize:6,minimumInputLength:1,tokenSeparators:[","," "],createTag:function(e){return{id:e.term,text:e.term}},templateResult:function(e){return e.name},templateSelection:function(e){return e.name},escapeMarkup:function(e){return e},ajax:{url:t.data("route"),dataType:"json",global:!1,cache:!0,delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:e.data.tags}}}})},selectOfficeEdit:function(){$("#office").select2({tags:!1,multiple:!0,tokenSeparators:[","," "]})},allOffices:function(){var e=$(".datatable-offices").data("route");$(".datatable-offices").DataTable({processing:!0,serverSide:!1,ajax:e,responsive:!0,order:[[1,"asc"]],columns:[{data:"name",width:"100px",render:function(e,t,a,n){return'<a href="'+a.route+'">'+e+"</a>"}},{data:"phone",width:"100px"},{data:"address",width:"100px"},{data:"route",visible:!1},{data:"id",visible:!1}],columnDefs:[{className:"cdatatable-td",targets:[0]},{className:"cdatatable-td",targets:[1]},{className:"cdatatable-td",targets:[2]},{className:"cdatatable-td",targets:[3]}],fnInitComplete:function(){$(".datatable-offices").css("width","100%")},lengthMenu:[[10,25,50,100,200,300,400,500],[10,25,50,100,200,300,400,500]]}).columns.adjust().draw()}},Surgery={slug:function(){var e=$("#slug").data("route"),t=$("#name").val();$("#name").change(function(){var a=$("#name").val(),n=$("#id_surgery").val();$("#btn-save").button("loading"),$.ajax({type:"post",url:e,dataType:"json",data:{title_before:t,title:a,id:n,mod:"surgery"}}).done(function(e){$("#slug").val(e.data.slug);var t=$("#slug-url").data("slug")+"/"+e.data.slug;$("#slug-url").html(t),$("#slug-url").attr("href",t)}).fail(function(e){}).always(function(){$("#btn-save").button("reset")})}).change()},editHTML:function(){$("#indications").summernote({height:200}),$("#preparation").summernote({height:200}),$("#description").summernote({height:200})},editSurgery:function(){var e=$("#surgery"),t=$("#surgery").validate({rules:{name:{required:!0,minlength:5},description:"required"},messages:{name:{required:"El título es un campo requerido",minlength:"Escriba un título más largo"},description:"No ha agregado contenido"},ignore:":hidden, [contenteditable='true']:not([body])"});$("#btn-save").click(function(t){if(e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("surgery"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status&&toastr.success(e.message,"!Exitoso!")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#body").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},createSurgery:function(){var e=$("#surgery"),t=$("#surgery").validate({rules:{name:{required:!0,minlength:5},description:"required",image:"required"},messages:{name:{required:"El título es un campo requerido",minlength:"Escriba un título más largo"},description:"No ha agregado contenido",image:"No ha agregado una imagen"},ignore:":hidden, [contenteditable='true']:not([body])"});$("#btn-save").click(function(t){if(e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("surgery"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if(400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status){toastr.success(e.message,"!Exitoso!"),$("#surgery")[0].reset(),$("#description").summernote("reset"),$("#preparation").summernote("reset"),$("#indications").summernote("reset"),$("#image-preview").css("background-image",""),$(".invalid-feedback").html(""),$("#office").val(null).trigger("change");var t=$("#slug-url").data("slug");$("#slug-url").html(t)}}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#body").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},imageUpload:function(e){$.uploadPreview({input_field:"#image",preview_box:"#image-preview",label_field:"#image-label",label_default:e,label_selected:e})},allSurgeries:function(){var e=$(".datatable-surgeries").data("route");$(".datatable-surgeries").DataTable({processing:!0,serverSide:!1,ajax:e,responsive:!0,order:[[4,"desc"]],columns:[{data:"name",width:"100px",render:function(e,t,a,n){return'<a href="'+a.route+'">'+e+"</a>"}},{data:"created",width:"120px"},{data:"status",width:"80px",render:function(e,t,a,n){return"DRAFT"==e?'<input type="checkbox" class="toggle-check" data-id="'+a.id+'" data-toggle="toggle" data-on="Publicado" data-off="No publicado" data-onstyle="info" data-size="small">':'<input type="checkbox" class="toggle-check" data-id="'+a.id+'" data-toggle="toggle" checked data-on="Publicado" data-off="No publicado"  data-onstyle="info" data-size="small">'}},{data:"route",visible:!1},{data:"id",visible:!1}],columnDefs:[{className:"cdatatable-td",targets:[0]},{className:"cdatatable-td",targets:[1]},{className:"cdatatable-td",targets:[2]},{className:"cdatatable-td",targets:[3]}],fnInitComplete:function(){$(".toggle-check").bootstrapToggle(),$(".datatable-surgeries").css("width","100%")},lengthMenu:[[10,25,50,100,200,300,400,500],[10,25,50,100,200,300,400,500]]}).columns.adjust().draw()},changeStatus:function(){$(document).on("click",".toggle",function(){var e=$(this).find("input.toggle-check"),t=e.is(":checked")?"PUBLISHED":"DRAFT";$.ajax({type:"post",url:$(".datatable-surgeries").data("route-status"),data:{id:e.data("id"),status:t}}).done(function(e){}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){})})}},Exams={slug:function(){var e=$("#slug").data("route"),t=$("#name").val();$("#name").change(function(){var a=$("#name").val(),n=$("#id_exam").val();$("#btn-save").button("loading"),$.ajax({type:"post",url:e,dataType:"json",data:{title_before:t,title:a,id:n,mod:"exam"}}).done(function(e){$("#slug").val(e.data.slug);var t=$("#slug-url").data("slug")+"/"+e.data.slug;$("#slug-url").html(t),$("#slug-url").attr("href",t)}).fail(function(e){}).always(function(){$("#btn-save").button("reset")})}).change()},createExam:function(){var e=$("#exam"),t=$("#exam").validate({rules:{name:{required:!0,minlength:5},description:"required",image:"required"},messages:{name:{required:"El título es un campo requerido",minlength:"Escriba un título más largo"},description:"No ha agregado contenido",image:"No ha agregado una imagen"},ignore:":hidden, [contenteditable='true']:not([description])"});$("#btn-save").click(function(t){if(e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("exam"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if(400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status){toastr.success(e.message,"!Exitoso!"),$("#exam")[0].reset(),$("#preparation").summernote("reset"),$("#indications").summernote("reset"),$("#description").summernote("reset"),$("#image-preview").css("background-image",""),$(".invalid-feedback").html(""),$("#office").val(null).trigger("change");var t=$("#slug-url").data("slug");$("#slug-url").html(t)}}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#description").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},editExam:function(){var e=$("#exam"),t=$("#exam").validate({rules:{name:{required:!0,minlength:5},description:"required"},messages:{name:{required:"El título es un campo requerido",minlength:"Escriba un título más largo"},description:"No ha agregado contenido"},ignore:":hidden, [contenteditable='true']:not([description])"});$("#btn-save").click(function(t){if(e.valid()){$(this).button("loading");var a=new FormData(document.getElementById("exam"));return $.ajax({type:"post",url:e.attr("action"),data:a,dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){400==e.status&&$.each(e.data,function(e,t){$("."+e+"-error").html(t)}),200==e.status&&toastr.success(e.message,"!Exitoso!")}).fail(function(e){toastr.error(e.message,"!Error!")}).always(function(){$("#btn-save").button("reset")}),!1}}),$("#description").summernote({callbacks:{onChange:function(e,a){myElement.val(myElement.summernote("isEmpty")?"":e),t.element(myElement)}}})},editHTML:function(){$("#preparation").summernote({height:200}),$("#description").summernote({height:200}),$("#indications").summernote({height:200})},imageUpload:function(e){$.uploadPreview({input_field:"#image",preview_box:"#image-preview",label_field:"#image-label",label_default:e,label_selected:e})},allExams:function(){var e=$(".datatable-exams").data("route");$(".datatable-exams").DataTable({processing:!0,serverSide:!1,ajax:e,responsive:!0,order:[[1,"asc"]],columns:[{data:"name",width:"100px",render:function(e,t,a,n){return'<a href="'+a.route+'">'+e+"</a>"}},{data:"created",width:"120px"},{data:"route",visible:!1},{data:"id",visible:!1}],columnDefs:[{className:"cdatatable-td",targets:[0]},{className:"cdatatable-td",targets:[1]},{className:"cdatatable-td",targets:[2]},{className:"cdatatable-td",targets:[3]}],fnInitComplete:function(){$(".datatable-exams").css("width","100%")},lengthMenu:[[10,25,50,100,200,300,400,500],[10,25,50,100,200,300,400,500]]}).columns.adjust().draw()}},Specialties={selectSpecialty:function(e){var t=$("#specialty");t.select2({multiple:!0,tags:!1,placeholder:"...",maximumSelectionSize:6,minimumInputLength:1,tokenSeparators:[","," "],createTag:function(e){return{id:e.term,text:e.term}},templateResult:function(e){return e.name},templateSelection:function(e){return e.name},escapeMarkup:function(e){return e},ajax:{url:t.data("route"),dataType:"json",global:!1,cache:!0,delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:e.data.tags}}}})},selectSpecialtyEdit:function(){$("#specialty").select2({tags:!1,multiple:!0,tokenSeparators:[","," "]})}};
